!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react"),require("node-vibrant")):"function"==typeof define&&define.amd?define(["exports","react","node-vibrant"],r):r(e.ReactColorExtractor={},e.React,e.Vibrant)}(this,function(e,r,c){"use strict";c=c&&c.hasOwnProperty("default")?c.default:c;var i=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},t=function(s){function p(){var e,o;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,p);for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];return(e=o=i(this,s.call.apply(s,[this].concat(t)))).processImage=function(){o.props.children?o.props.children.props.src&&o.parseImage(o.props.children.props.src,o.props):o.props.src&&"string"==typeof o.props.src&&0<o.props.src.length?o.parseImage(o.props.src,o.props):console.error("Please provide an image url using the 'src' prop or wrap an image element under the <ColorExtractor /> component. Check out the docs for more info - https://goo.gl/rMZ5L7")},o.parseImage=function(r,t){c.from(r).maxColorCount(t.maxColors).getSwatches().then(function(e){return t.getColors(o.getColorsFromSwatches(e,t))}).catch(function(e){e&&o.useDefaultImageClass(r,t)})},o.useDefaultImageClass=function(e,r){(new c.DefaultOpts.ImageClass).load(e.src).then(function(e){e.image&&c.from(e.image).getSwatches().then(function(e){return r.getColors(o.getColorsFromSwatches(e,r))}).catch(function(e){e&&r.onError(e)})}).catch(function(e){e&&r.onError(e)})},o.getColorsFromSwatches=function(e,r){var t=[];for(var o in e)e.hasOwnProperty(o)&&e[o]&&(r.rgb?t.push(e[o].getRgb()):t.push(e[o].getHex()));return t},i(o,e)}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(p,s),p.prototype.componentDidMount=function(){this.processImage()},p.prototype.componentDidUpdate=function(e){e.src!==this.props.src&&"string"==typeof this.props.src&&0<this.props.src.length?this.parseImage(this.props.src,this.props):this.props.children&&e.children.props.src!==this.props.children.props.src&&this.parseImage(this.props.children.props.src,this.props)},p.prototype.render=function(){var e=r.Children.count(this.props.children);if(1<e)throw new Error("Expected only one image element.");if(1!==e)return null;if("img"===this.props.children.type)return this.props.children;throw new Error('Expected children to be an image element but instead got a "'+this.props.children.type+'"')},p}(r.Component);t.defaultProps={onError:function(e){},getColors:function(e){},rgb:!1,hex:!0,src:null,maxColors:64},e.ColorExtractor=t,Object.defineProperty(e,"__esModule",{value:!0})});
